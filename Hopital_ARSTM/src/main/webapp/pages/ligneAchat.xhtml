<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

	
	<ui:composition template="/templates/template.xhtml">
			
			<ui:define name="body">

			<h:form id="form">
			
			<p:messages autoUpdate="true" closable="true" showDetail="false"></p:messages>
			<p:panel header="ENREGISTREMENT DES ACHATS">
	<h:panelGrid  columns="4" cellspacing="15" style="margin: 15px;">
	
	     <h:outputLabel value="Code ligneAchat"></h:outputLabel>
	     <h:inputText value="#{ligneAchatController.ligneAchat.codeAchat}"></h:inputText>
	     
	     
	     <h:outputLabel value="Quantite ligneAchat"></h:outputLabel>
	     <h:inputText value="#{ligneAchatController.ligneAchat.quantiteMedicauent}" ></h:inputText>
	     
	     <h:outputLabel value="Medicament"></h:outputLabel>
	     <p:selectOneMenu value="#{ligneAchatController.idMedicament}" >
	        <f:selectItem itemLabel="Selectionner" itemValue=""></f:selectItem>	
	        <f:selectItems value="#{ligneAchatController.listMedicament}" var="tata" itemLabel="#{tata.nomMedicament}" itemValue="#{tata.idMedicament}"></f:selectItems>	
	     </p:selectOneMenu>
	     
	   
	      <h:outputLabel value="Facture "></h:outputLabel>
	     <p:selectOneMenu value="#{ligneAchatController.idFacturePharmacie}" >
	        <f:selectItem itemLabel="Selectionner" itemValue=""></f:selectItem>	
	        <f:selectItems value="#{ligneAchatController.listFacturePharmacie}" var="tata" itemLabel="#{tata.codeFacturePharmacie}" itemValue="#{tata.idFacturePharmacie}"></f:selectItems>	
	     </p:selectOneMenu>
	       
	      <h:outputLabel value=" Patient"></h:outputLabel>
	     <p:selectOneMenu value="#{ligneAchatController.idPatient}" >
	        <f:selectItem itemLabel="Selectionner" itemValue=""></f:selectItem>	
	        <f:selectItems value="#{ligneAchatController.listPatient}" var="tata" itemLabel="#{tata.nomPatient} #{tata.prenomPatient}" itemValue="#{tata.idPatient}"></f:selectItems>	
	     </p:selectOneMenu>
	     
	     
	     <!-- binding permet de faire un lien -->
	   
	  </h:panelGrid>
	  
	  </p:panel>
	 		<p:toolbar>
	         <f:facet name="left">
	             <p:commandButton  value="Enregistrer " actionListener="#{ligneAchatController.enregistrer}" update="form" binding="#{ligneAchatController.btnEnregistrer}"><p:confirm header="confirmation" message="confirmez-vous l'enregistrement?"></p:confirm></p:commandButton>
	         </f:facet>
	   </p:toolbar>
	  <br/>

	   <p:dataTable var="variable" value="#{ligneAchatController.listLigneAchat}" selectionMode="single" selection="#{ligneAchatController.selectedLigneAchat}" rowKey="#{variable.idAchat}">
	  <f:facet name="header">LISTES DES ACHATS</f:facet>
	  <p:ajax event="rowSelect" process="@this" listener="#{ligneAchatController.selectionnerLigne}" update="form"></p:ajax>
	     
	     
	     <p:column headerText="Code ligneAchat" >
	     <h:outputText value="#{variable.codeAchat}"/>
	    </p:column>
	    
	      <p:column headerText="Medicament" >
	     <h:outputText value="#{variable.medicament.nomMedicament}"/>
	     </p:column>
	     
	     <p:column headerText="QuantitÃ© medicament" >
	     <h:outputText value="#{variable.quantiteMedicauent}"/>
	    </p:column>
	    
	     <p:column headerText="Nom et prenoms patient" >
	     <h:outputText value="#{variable.patient.nomPatient} #{variable.patient.prenomPatient}"/>
	    </p:column>
	    
	    <p:column headerText="Facture">
	    <h:outputText value="#{variable.facturePharmacie.codeFacturePharmacie}" />
	    </p:column>
	     
	   </p:dataTable>
	   
	   <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
	   <p:commandButton value="Oui" type="button"
	   styleClass="ui-confirmdialog-yes" icon="ui-icon-check" >
	   </p:commandButton>
	   <p:commandButton value="Non" type="button"
	   styleClass="ui-confirmdialog-no" icon="ui-icon-close" >
	   </p:commandButton>
	   
	   </p:confirmDialog>
	  
      </h:form>
 
	</ui:define>	
	
	</ui:composition> 

</html>
